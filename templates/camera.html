{% extends "base.html" %}
{% block title %}Security{% endblock %}
{% block head %}
  {{ super() }}
    <link rel="stylesheet" href="{{url_for('static', filename='css/security.css')}}">
    <link rel="stylesheet" href="https://use.typekit.net/oaq5uou.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js" integrity="sha512-iZIBSs+gDyTH0ZhUem9eQ1t4DcEn2B9lHxfRMeGQhyNdSUz+rb+5A3ummX6DQTOIs1XK0gOteOg/LPtSo9VJ+w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>

        const socket = io.connect('http://192.168.0.201:5000');
        socket.on("connect", function()
        {
            console.log("connected");
        });

      var interval;
      function send_command(direction) 
      {
          interval = setInterval(emit_direction, 1, direction);
      }

      function mouseUpEvent()
       {
          clearInterval(interval);  
        }


        function emit_direction(direction)
        {
            socket.emit("to_camera", {"direction":direction});
        }

    </script>


{% endblock %}

{% block content %}

<div class="set">
  <nav class="d-pad">
    <a class="up" id="up" href="#" onmousedown="send_command(this.id)" onmouseup="mouseUpEvent()"></a>
    <a class="right" id="right" href="#" onmousedown="send_command(this.id)" onmouseup="mouseUpEvent()"></a>
    <a class="down" id="down" href="#" onmousedown="send_command(this.id)" onmouseup="mouseUpEvent()"></a>
    <a class="left" id="left" href="#" onmousedown="send_command(this.id)" onmouseup="mouseUpEvent()"c></a>  
  </nav>
  
</div>
{% endblock %}